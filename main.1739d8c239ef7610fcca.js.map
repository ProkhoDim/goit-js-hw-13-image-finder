{"version":3,"sources":["webpack:///./jscript/app/markupRefs.js","webpack:///./jscript/app/apiService.js","webpack:///./jscript/app/fetchImage.js","webpack:///./jscript/app/markup.js","webpack:///./jscript/app/handleKeypress.js","webpack:///./jscript/app/loadMore.js","webpack:///./jscript/app/init.js","webpack:///./jscript/templates/imageCard.hbs"],"names":["jsResult","document","querySelector","input","getElementById","elements","query","loadMoreBtn","APIKEY","page","searchText","updatePage","this","console","log","resetPage","searchQuery","wordsInQuery","split","queryForFetch","join","fetch","apiService","response","responseObj","json","markup","textInInput","markupRef","value","fetchImage","data","dataArray","hits","length","PNotify","error","text","htmlText","map","item","galleryItem","insertAdjacentHTML","defaults","styling","icons","scrolling","scrollPosition","window","scrollY","innerHeight","offsetHeight","intervalId","setInterval","Array","from","images","filter","complete","clearInterval","scrollTo","left","top","behavior","hidden","addEventListener","e","key","preventDefault","val","isEmptyInput","isSameText","innerHTML","target","tagName","basicLightbox","dataset","source","src","show","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","largeImageURL","likes","views","comments","downloads"],"mappings":"uIAAe,GACbA,SAAUC,SAASC,cAAc,eACjCC,MAAOF,SAASG,eAAe,eAAeC,SAASC,MACvDC,YAAaN,SAASC,cAAc,sB,+FCHvB,G,oBAAA,CACbM,OAAQ,qCACRC,KAAM,EACNC,WAAY,GACZC,WAJa,WAKXC,KAAKH,MAAQ,EACbI,QAAQC,IAAIF,MACZC,QAAQC,IAAIF,KAAKH,OAGnBM,UAVa,WAWXH,KAAKH,KAAO,K,yHCThB,qB,EAAA,G,EAAA,yBAAe,WAAMO,GAAN,mGACPC,EAAeD,EAAYE,MAAM,KACjCC,EAAgBF,EAAaG,KAAK,KAF3B,SAGUC,MAAM,sEAC2CF,EAD5C,SACkEG,EAAWb,KAD7E,oBACqGa,EAAWd,QAJ/H,cAGPe,EAHO,OAMPC,EAAcD,EAASE,OAC7BH,EAAWZ,WAAaM,EAPX,kBASNQ,GATM,0C,+KAAf,sD,yHCMe,SAAeE,IAA9B,+B,qDAAe,gHACPC,EAAcC,EAAUzB,MAAM0B,MADvB,SAGMC,EAAWH,GAHjB,UAGPI,EAHO,OAMY,KAFnBC,EAAYD,EAAKE,MAETC,OAND,yCAOJC,IAAQC,MAAM,CACnBC,KAAM,sBARG,cAYPC,EAAWN,EAAUO,KAAI,SAAAC,GAAI,OAAIC,IAAYD,MAAOpB,KAAK,IAZlD,UAaPQ,EAAU5B,SAAS0C,mBAAmB,YAAaJ,GAb5C,4C,uMAHfH,IAAQQ,SAASC,QAAU,WAC3BT,IAAQQ,SAASE,MAAQ,WCJzBV,IAAQQ,SAASC,QAAU,WAC3BT,IAAQQ,SAASE,MAAQ,W,4MCCV,oGACbvB,EAAWX,aADE,SAGPe,IAHO,OASboB,IATa,2C,uMAYf,SAASA,IACP,IAAMC,EACJC,OAAOC,QACPD,OAAOE,YACPtB,EAAUrB,YAAY4C,aACtBvB,EAAUzB,MAAMgD,aACZC,EAAaC,aAAY,WACG,IAYtBC,MAAMC,KAAKtD,SAASuD,QACrBC,QAAO,SAAAjB,GAAI,OAAsB,IAAlBA,EAAKkB,YAbRxB,SACnByB,cAAcP,GACdJ,OAAOY,SAAS,CACdC,KAAM,EACNC,IAAKf,EACLgB,SAAU,cAGb,K,gBC1BLnC,EAAUrB,YAAYyD,QAAS,EAC/BpC,EAAUzB,MAAM8D,iBAAiB,YFGlB,SAAwBC,GACrC,GAAc,UAAVA,EAAEC,IAAN,CAGAD,EAAEE,iBACF,IAAMzC,EAAcC,EAAUzB,MAAM0B,OAStC,SAAsBwC,GACpB,IAAKA,EAIH,OAHAlC,IAAQC,MAAM,CACZC,KAAM,+BAED,EAET,OAAO,GAfHiC,CAAa3C,IAkBnB,SAAoB0C,GAClB,GAAIA,IAAQ/C,EAAWZ,WAIrB,OAHAyB,IAAQC,MAAM,CACZC,KAAM,8CAED,EAET,OAAO,EAxBHkC,CAAW5C,KA4BfL,EAAWP,YACXa,EAAU5B,SAASwE,UAAY,GA3B/B9C,IACAE,EAAUrB,YAAYyD,QAAS,OEZjCpC,EAAUrB,YAAY0D,iBAAiB,SDHxB,WAAf,kCCKArC,EAAU5B,SAASiE,iBAAiB,SAAS,SAAAC,GAClB,QAArBA,EAAEO,OAAOC,UACXR,EAAEE,iBACFO,SAAA,aACuBT,EAAEO,OAAOG,QAAQC,OADxC,UACwDX,EAAEO,OAAOK,IADjE,MAEGC,W,gCCdP,IAAIC,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASxD,GACzI,IAAIyD,EAAQC,EAAiB,MAAVJ,EAAiBA,EAAUD,EAAUM,aAAe,GAAKC,EAAOP,EAAUQ,MAAMC,cAAeC,EAAO,WAAYC,EAAOX,EAAUY,iBAExJ,MAAO,6CACHD,SAASP,EAA+F,OAArFA,EAASF,EAAQW,eAA2B,MAAVZ,EAAiBA,EAAOY,aAAeZ,IAAmBG,EAASG,KAA2BG,EAASN,EAAOU,KAAKT,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAO1D,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASyD,GACpS,UACAO,SAASP,EAA+F,OAArFA,EAASF,EAAQW,eAA2B,MAAVZ,EAAiBA,EAAOY,aAAeZ,IAAmBG,EAASG,KAA2BG,EAASN,EAAOU,KAAKT,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAO1D,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASyD,GACpS,kBACAO,SAASP,EAAiG,OAAvFA,EAASF,EAAQa,gBAA4B,MAAVd,EAAiBA,EAAOc,cAAgBd,IAAmBG,EAASG,KAA2BG,EAASN,EAAOU,KAAKT,EAAO,CAAC,KAAO,gBAAgB,KAAO,GAAG,KAAO1D,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASyD,GACvS,8IACAO,SAASP,EAAiF,OAAvEA,EAASF,EAAQc,QAAoB,MAAVf,EAAiBA,EAAOe,MAAQf,IAAmBG,EAASG,KAA2BG,EAASN,EAAOU,KAAKT,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAO1D,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASyD,GAC/Q,6HACAO,SAASP,EAAiF,OAAvEA,EAASF,EAAQe,QAAoB,MAAVhB,EAAiBA,EAAOgB,MAAQhB,IAAmBG,EAASG,KAA2BG,EAASN,EAAOU,KAAKT,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAO1D,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASyD,GACjR,0HACAO,SAASP,EAAuF,OAA7EA,EAASF,EAAQgB,WAAuB,MAAVjB,EAAiBA,EAAOiB,SAAWjB,IAAmBG,EAASG,KAA2BG,EAASN,EAAOU,KAAKT,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAO1D,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASyD,GAC1R,iIACAO,SAASP,EAAyF,OAA/EA,EAASF,EAAQiB,YAAwB,MAAVlB,EAAiBA,EAAOkB,UAAYlB,IAAmBG,EAASG,KAA2BG,EAASN,EAAOU,KAAKT,EAAO,CAAC,KAAO,YAAY,KAAO,GAAG,KAAO1D,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASyD,GAC7R,4CACJ,SAAU,M","file":"main.1739d8c239ef7610fcca.js","sourcesContent":["export default {\r\n  jsResult: document.querySelector('.js-gallery'),\r\n  input: document.getElementById('search-form').elements.query,\r\n  loadMoreBtn: document.querySelector('.js-load-more-btn'),\r\n};\r\n","export default {\r\n  APIKEY: '15440827-454030fbfe14a611a1b7b063f',\r\n  page: 1,\r\n  searchText: '',\r\n  updatePage() {\r\n    this.page += 1;\r\n    console.log(this);\r\n    console.log(this.page);\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n","import apiService from './apiService';\r\n\r\nexport default async searchQuery => {\r\n  const wordsInQuery = searchQuery.split(' ');\r\n  const queryForFetch = wordsInQuery.join('+');\r\n  const response = await fetch(\r\n    `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${queryForFetch}&page=${apiService.page}&per_page=12&key=${apiService.APIKEY}`,\r\n  );\r\n  const responseObj = response.json();\r\n  apiService.searchText = searchQuery;\r\n\r\n  return responseObj;\r\n};\r\n","import galleryItem from '../templates/imageCard.hbs';\r\nimport markupRef from './markupRefs';\r\nimport fetchImage from './fetchImage';\r\nimport PNotify from 'pnotify/dist/es/PNotify';\r\nimport PNotifyStyleMaterial from 'pnotify/dist/es/PNotifyStyleMaterial.js';\r\nPNotify.defaults.styling = 'material';\r\nPNotify.defaults.icons = 'material';\r\n\r\nexport default async function markup() {\r\n  const textInInput = markupRef.input.value;\r\n\r\n  const data = await fetchImage(textInInput);\r\n  const dataArray = data.hits;\r\n\r\n  if (dataArray.length === 0) {\r\n    return PNotify.error({\r\n      text: 'Nothing to find!',\r\n    });\r\n  }\r\n\r\n  const htmlText = dataArray.map(item => galleryItem(item)).join('');\r\n  await markupRef.jsResult.insertAdjacentHTML('beforeend', htmlText);\r\n}\r\n","import PNotify from 'pnotify/dist/es/PNotify';\r\nimport PNotifyStyleMaterial from 'pnotify/dist/es/PNotifyStyleMaterial.js';\r\nPNotify.defaults.styling = 'material';\r\nPNotify.defaults.icons = 'material';\r\n\r\nimport markup from './markup';\r\nimport apiService from './apiService';\r\nimport markupRef from './markupRefs';\r\n\r\nexport default function handleKeypress(e) {\r\n  if (e.key !== 'Enter') {\r\n    return;\r\n  }\r\n  e.preventDefault();\r\n  const textInInput = markupRef.input.value;\r\n  if (isEmptyInput(textInInput)) return;\r\n  if (isSameText(textInInput)) return;\r\n  resetCurrentSearchResult();\r\n  markup();\r\n  markupRef.loadMoreBtn.hidden = false;\r\n  return;\r\n}\r\n\r\nfunction isEmptyInput(val) {\r\n  if (!val) {\r\n    PNotify.error({\r\n      text: 'Write some text in input!',\r\n    });\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction isSameText(val) {\r\n  if (val === apiService.searchText) {\r\n    PNotify.error({\r\n      text: 'Click Load more button or scroll to end!',\r\n    });\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction resetCurrentSearchResult() {\r\n  apiService.resetPage();\r\n  markupRef.jsResult.innerHTML = '';\r\n}\r\n","import markup from './markup';\r\nimport markupRef from './markupRefs';\r\nimport apiService from './apiService';\r\n\r\nexport default async function loadMore() {\r\n  apiService.updatePage();\r\n\r\n  await markup();\r\n  // window.scrollBy({\r\n  //   left: 0,\r\n  //   top: window.innerHeight - markupRef.loadMoreBtn.offsetHeight,\r\n  //   behavior: 'smooth',\r\n  // });\r\n  scrolling();\r\n}\r\n\r\nfunction scrolling() {\r\n  const scrollPosition =\r\n    window.scrollY +\r\n    window.innerHeight -\r\n    markupRef.loadMoreBtn.offsetHeight -\r\n    markupRef.input.offsetHeight;\r\n  const intervalId = setInterval(() => {\r\n    if (unLoadedImages().length === 0) {\r\n      clearInterval(intervalId);\r\n      window.scrollTo({\r\n        left: 0,\r\n        top: scrollPosition,\r\n        behavior: 'smooth',\r\n      });\r\n    }\r\n  }, 100);\r\n}\r\n\r\nfunction unLoadedImages() {\r\n  const arr = Array.from(document.images);\r\n  return arr.filter(item => item.complete === false);\r\n}\r\n","import markupRef from './markupRefs';\r\nimport handleKeypress from './handleKeypress';\r\nimport loadMore from './loadMore';\r\nimport * as basicLightbox from 'basiclightbox';\r\n\r\nmarkupRef.loadMoreBtn.hidden = true;\r\nmarkupRef.input.addEventListener('keypress', handleKeypress);\r\nmarkupRef.loadMoreBtn.addEventListener('click', loadMore);\r\n\r\nmarkupRef.jsResult.addEventListener('click', e => {\r\n  if (e.target.tagName === 'IMG') {\r\n    e.preventDefault();\r\n    basicLightbox\r\n      .create(`<img src=\"${e.target.dataset.source}\" alt=\"${e.target.src}\">`)\r\n      .show();\r\n  }\r\n});\r\n","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":14},\"end\":{\"line\":2,\"column\":32}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":39},\"end\":{\"line\":2,\"column\":57}}}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":72},\"end\":{\"line\":2,\"column\":91}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":12},\"end\":{\"line\":7,\"column\":23}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":12},\"end\":{\"line\":11,\"column\":23}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":12},\"end\":{\"line\":15,\"column\":26}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":12},\"end\":{\"line\":19,\"column\":27}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n    </div>\\r\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}